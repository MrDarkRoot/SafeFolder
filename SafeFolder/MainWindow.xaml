<Window x:Class="SafeFolder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SafeFolder"
        xmlns:views="clr-namespace:SafeFolder.Views"
        xmlns:viewmodels="clr-namespace:SafeFolder.ViewModels"
        mc:Ignorable="d"
        Title="Safe Folder" Height="600" Width="800"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <!-- Style for ListView items to make them feel more interactive -->
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Padding" Value="5"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E0E0E0"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#007ACC"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- The Login View is visible by default -->
        <views:LoginView x:Name="LoginView" Visibility="Visible"/>

        <!-- The Main Application View is hidden by default -->
        <Grid x:Name="MainAppView" Visibility="Collapsed" d:DataContext="{d:DesignInstance Type=viewmodels:MainViewModel, IsDesignTimeCreatable=True}">
            <DockPanel>
                <!-- Menu Bar -->
                <Menu DockPanel.Dock="Top">
                    <MenuItem Header="_Tệp">
                        <MenuItem Header="_Thêm Thư mục" Command="{Binding AddFolderCommand}"/>
                        <Separator/>
                        <MenuItem Header="_Thoát"/>
                    </MenuItem>
                    <MenuItem Header="_Bảo mật">
                        <MenuItem Header="_Thay đổi Mật khẩu..."/>
                    </MenuItem>
                </Menu>

                <!-- Toolbar -->
                <ToolBarTray DockPanel.Dock="Top">
                    <ToolBar>
                        <Button Command="{Binding AddFolderCommand}" ToolTip="Thêm thư mục mới">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="/Assets/AddFolder.png" Width="16" Height="16" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" />
                                <TextBlock Text="Thêm" Margin="5,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Separator/>
                        <Button Command="{Binding LockCommand}" ToolTip="Khóa thư mục đã chọn">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="/Assets/Lock.png" Width="16" Height="16" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" />
                                <TextBlock Text="Khóa" Margin="5,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Button Command="{Binding UnlockCommand}" ToolTip="Mở khóa thư mục đã chọn">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="/Assets/Unlock.png" Width="16" Height="16" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" />
                                <TextBlock Text="Mở khóa" Margin="5,0,0,0"/>
                            </StackPanel>
                        </Button>
                    </ToolBar>
                </ToolBarTray>

                <!-- Status Bar -->
                <StatusBar DockPanel.Dock="Bottom">
                    <StatusBarItem>
                        <TextBlock Text="{Binding StatusBarText}"/>
                    </StatusBarItem>
                </StatusBar>

                <!-- Main Content: List of Folders -->
                <ListView ItemsSource="{Binding ProtectedFolders}" SelectedItem="{Binding SelectedFolder}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Tên Thư mục" Width="200" DisplayMemberBinding="{Binding Name}"/>
                            <GridViewColumn Header="Đường dẫn" Width="400" DisplayMemberBinding="{Binding Path}"/>
                            <GridViewColumn Header="Trạng thái" Width="120">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Status}" FontWeight="Bold"
                                                   Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </DockPanel>
        </Grid>
    </Grid>
</Window>